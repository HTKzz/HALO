<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	layout:decorate="~{layouts/layout1}">
	
<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
<style>

</style>
</th:block>
	
<head>

<link th:href="@{/css/vocDetail.css}" rel="stylesheet">
</head>

<th:block layout:fragment="script">
	
	<script th:inline="javascript">
		$(document).ready(function(){
			var errorMessage = [[${errorMessage}]];
			if(errorMessage != null){
				alert(errorMessage);
			}
			
			$("#succSubmit").on("click", function(){
				if(confirm('글을 삭제하시겠습니까?')){
					alert("글을 삭제하였습니다.");	
				} else {
					return false;
				}
			});
		});
	</script>
		
</th:block>

<div layout:fragment="content">

	<form method="get" action="/voc/detail" role="form">
		<input type="hidden" id="num" th:value="${voc.num}">
		
		
		<div class="detail-header">
           <p><a href="/">Home</a> > <strong>고객의 소리</strong></p>
		</div>
		
		<div class="title-wrapper">
			<div class="detail-title">
				<h1 th:text="${voc.name}"></h1>
			</div>
		</div>
		<div class="view-wrapper">
			<div>
				<span class="view-date"  th:text="${#temporals.format(voc.regTime, 'yyyy-MM-dd')}"></span>
				<span class="view-views" th:text="${voc.cnt}"></span>
				<span class="view-text">view</span>
			</div>
		</div>
			
		<div>
			<div class="bodyContent">
				<!-- 내용 : &nbsp; -->
				<pre><span class="bodyContent_inner" th:text="${voc.content}"></span></pre>	
			</div>
		</div>
		
		
		
		<div>
			<div class="download">
				<span class="download_text">첨부파일</span>
				<span class="download_inner" th:each="attach : ${voc.attachDtoList}">
					<a th:href="@{/voc/download/{num}(num=${attach.num})}" th:text="${attach.oriName}"></a>
				</span>
			</div>
		</div>
		
		
		<div class="button-wrapper">
		<div>
			<div class="group-button">
			<span class="r-button">
				<a th:href="@{/voc/reply/{num}(num=${voc.realNum})}">답글</a>
			</span>
		
			<span class="l-button" th:if="${username} == ${writername}">
				<a th:href="@{/voc/update/{num}(num=${voc.realNum})}" class="voc-update" id="btn">수정</a>
			</span>
		
			<span class="l-button" th:if="${username} == ${writername} or ${username} == 'admin'">
				<a th:href="@{/voc/delete/{num}(num=${voc.realNum})}" class="voc-delete" id="succSubmit">삭제</a>
				
			</span>
			</div>
		</div>
		
		<a th:href="@{/voc/list/}" class="back-to-list">목록</a>
		
		
		<div class="detailPrev">
			<ul class="detailPrev_inner">
				<li>
					<a th:href="@{/voc/detail/{num}(num=${voc.realNum-1})}" th:if="${voc.realNum-1 != 0}">
						<span class="detailPrev-inner-span" >
							<span class="detailPrev inner_text" th:if="${voc.allVocCnt >= voc.realNum}">이전글</span>
							<span class="detailPrev inner_text" th:text="${voc.prevContent}"></span>
						</span>
					</a>
				&nbsp;</li>
				
				<li th:if="${voc.allVocCnt > voc.realNum}">
					<a th:href="@{/voc/detail/{num}(num=${voc.realNum+1})}">
						<span class="detailNext inner_text">다음글</span>
						<span class="detailNext inner_text" th:text="${voc.nextContent}"></span>
					</a>
				</li>
				 
			</ul>
		</div>
		</div>
		
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
	</form>
</div>

</html>