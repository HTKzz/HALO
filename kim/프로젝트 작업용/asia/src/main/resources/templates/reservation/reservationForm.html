<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">

<head>
	<link rel="stylesheet" th:href="@{/css/reservationForm.css}" />
</head>
<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
	<style>
input {
	width: 100px;
	text-align: center;
	border: none;
	border-right: 0px;
	border-top: 0px;
	boder-left: 0px;
	boder-bottom: 0px;
}
</style>
</th:block>

<!-- 사용자 스크립트 추가 -->
<th:block layout:fragment="script">
	<script th:inline="javascript">
		$(document).ready(function(){
			var errorMessage = [[${errorMessage}]];
			if(errorMessage != null){
				alert(errorMessage);
			}
			
			$("#cnt").on("propertychange change paste input", function() {
				var price = fnReplace($("#hdprice").val());
				var cnt = fnReplace($("#cnt").val())
				
				$("#price").val(price*cnt);
			});
			
		});
			

		function fnReplace(val) {
		    var ret = 0;
		    if(typeof val != "undefined" && val != null && val != ""){
		        ret = Number(val.replace(/,/gi,''));
		    }
		    return ret;        
		}	
	</script>
</th:block>
<div layout:fragment="content">
	<form action="/reservations/add1" role="form" method="post" th:object="${application}" id="frm">
		<input type="hidden" th:value="${anum}" name="anum">
		<h1 class="reservationForm-title-h1">Reservation</h1>
			<div class="h4 text-danger text-left">
				<input type="hidden" th:field="*{programCategory}" id="programCategory" name="programCategory">
				<input type="text" th:field="*{programCategory}" readOnly>예매
			</div>
			<div class="h4 text-danger text-left">프로그램명
				<input type="hidden" th:field="*{name}" id="name" name="name">
				<input type="text" th:field="*{name}" readOnly>
			</div>
			<div class="h4 text-danger text-left">날짜
				<input type="hidden" th:field="*{udate}" id="udate"	name="udate">
				<input type="text" th:field="*{udate}" readOnly>
			</div>
			<div class="h4 text-danger text-left">장소
				<input type="hidden" th:field="*{place}" id="place"	name="place">
				<input type="text" th:field="*{place}" readOnly>
			</div>
			<div class="form-group">
				<label th:for="cnt">인원</label>
				<input type="number" name="cnt" id="cnt" class="form-control" value="1">
			</div>
			<div class="form-group">
				<label th:for="price">가격</label>
				<input type="text" th:field="*{price}" class="form-control" readonly>
				<input type="hidden" name="price" id="hdprice" th:field="*{price}">
			</div>
			<div class="text-right">
				<button type="submit" class="btn btn-primary btn-lg">예매하기</button>
			</div>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
	</form>
</div>
</html>

