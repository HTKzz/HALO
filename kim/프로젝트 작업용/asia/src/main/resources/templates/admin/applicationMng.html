<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout1}">

<!--  사용자 스크립트 추가 -->
<th:block layout:fragment="script">
    <script th:inline="javascript">
        /*  $(document).ready(function() {
	  $("#searchBtn").on("click", function(e) {
		  e.preventDefault();
		  page(0);
	  });
  });
  
  function page(page) {
	  var searchDateType = $("#searchDateType").val();
	  var searchProgramCategory = $("#searchProgramCategory").val();
	  var searchBy = $("#searchBy").val();
	  var searchQuery = $("#searchQuery").val();
	  
	  location.href="/board/program/applications/" + page + "?searchDateType=" + searchDateType
			  + "&searchProgramCategory=" + searchProgramCategory
			  + "&searchBy=" + searchBy
			  + "&searchQuery=" + searchQuery;
	  
  } */

    </script>
</th:block>

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
    <style>
        select {
            margin-right: 10px;
        }




        .searchbar {
            text-align: center;
        }

    </style>
</th:block>

<div layout:fragment="content">
    <link th:href="@{/css/vocList.css}" rel="stylesheet">
<div>
<section class="vocList">

	<div class="vocList-title">
        <h3>상품관리</h3>
    </div>
    <div class="vocList-container">
    <form class="applicationForm-txt" name="applicationForm" role="form" method="get" th:object="${application1}">
        <table class="vocList-table">
            <thead>
                <tr class="voc-tr">
                    <td class="vocList-num">프로그램아이디</td>
                    <td class="vocList-name">프로그램명</td>
                    <td class="vocList-category">카테고리</td>
                    <td class="vocList-writer">등록자</td>
                    <td class="vocList-date">등록일</td>
                    <td class="vocList-approvalStatus">승인상태</td>
                    <td class="vocList-approvalStatusYN">승인여부</td>
                </tr>
            </thead>
            <tbody th:align="center">
            
                <tr th:each="application1, status: ${applications.getContent()}">
                    <td class="vocList-num" th:text="${application1.num}"></td>
                    <td class="vocList-name">
                        <a th:href="'/board/program/application/'+${application1.name}" th:text="${application1.name}"></a>
                    </td>
                    <td class="vocList-category" th:text="${application1.programCategory}">
                    </td>
                    <td class="vocList-writer" th:text="${application1.createdBy}"></td>
                    <td class="vocList-date" th:text="${#temporals.format(application1.regTime, 'yy년 MM월 dd일 HH시 mm분')}"></td>
                    <td class="vocList-approvalStatus" th:text="${application1.approvalStatus}"></td>
                    <td class="vocList-approvalStatus-listbutton" th:if="${application1.approvalStatus} == '미승인'" style="text-align: center">
                    	<button class="vocList-approvalStatus-button" th:formaction="@{'/admin/approvalstatus/change/' + ${application1.num}}" type="submit">승인하기</button>
                    </td>
                    <td class="vocList-approvalStatus-listbutton" th:if="${application1.approvalStatus} == '승인'" style="text-align: center">
                    	승인완료
                    </td>
                    
                   <!--  <div class="applicationForm-btn" th:if="${#strings.isEmpty(applicationDto.num)}" style="text-align: center">
                <button class="applicationForm-button" th:formaction="@{/board/program/apply}" type="submit" name="sign">신청</button>
              </div>
                    <div class="applicationForm-btn" th:unless="${#strings.isEmpty(applicationDto.num)}" style="text-align: center">
                <button class="applicationForm-button" th:formaction="@{'/board/program/apply/' + ${applicationDto.num}}" type="submit" name="sign">수정</button>
              </div> -->
              <!-- th:formaction="@{/admin/approvalstatus/change/}+${application1.num}"
              <a th:href="@{/admin/approvalstatus/change/}+${application1.num}">승인하기</a> -->
                </tr>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            </tbody>
        </table>
       </form>
		<br>

        <div class="page_wrap">
            <ul class="pagination justify-content-center">

                <li class="page-item" th:classappend="${startPage == applications.pageable.pageNumber + 1} ? 'disabled'">
                    <a class="page-link" th:href="@{/admin/applications(page=${applications.pageable.pageNumber - 1})}" tabindex="-1" aria-disabled="true">Previous</a>
                </li>


                <li class="page-item" th:classappend="${page == applications.pageable.pageNumber + 1} ? 'active'" th:each="page : ${#numbers.sequence(startPage, endPage)}">
                <a class="page-link" th:href="@{/admin/applications(page=${page-1})}"
                th:text=${page} aria-current="page">1</a>
            </li>
            
 
            <li class="page-item" th:classappend="${endPage == applications.pageable.pageNumber + 1} ? 'disabled'">
                <a class="page-link" th:href="@{/admin/applications(page=${applications.pageable.pageNumber + 1}, searchKeyword = ${param.searchKeyword})}">Next</a>
            </li>
            
        	</ul>
		</div>
    <!-- <th:block th:each= "page : ${#numbers.sequence(startPage, endPage)}">
                                                        검색기능-4
        <a th:if="${page != nowPage}"
           th:href="@{/program/applications(page = ${page -1}, searchKeyword = ${param.searchKeyword})}"
           th:text="${page}">
        </a>

        <strong th:if="${page == nowPage}" th:text="${page}" style="color : red"></strong>
    </th:block> -->
    
    <!-- <div class="page_wrap">
    <th:block th:each="page:${#numbers.sequence(startPage,endPage)}">
        <a th:if="${page==0? page==1 : page != nowPage}" th:href="@{/program/applications(page=${page-1})}" th:text ="${page}"></a>
        <strong th:if="${page==nowPage}" th:text ="${page}" style="color:red"></strong>
    </th:block>
</div> -->

    
 <div class=searchbar>
    <!--검색기능-5-->
    <form id="searchForm" th:action="@{/board/program/applications}" method="post">

        <select name="searchType">
        	<option value="">전체 검색</option>
        	<option value="name">제목</option>
        	<option value="programCategory">카테고리</option>
        	<option value="createdBy">등록자</option>
        </select>
        <input type="text" name="searchKeyword">
        <button type="submit">검색</button>
        
    </form>
    </div>
  
    

<!-- <div th:with="start=${(applications.number/maxPage)*maxPage + 1}, end=(${(applications.totalPages == 0) ? 1 : (start + (maxPage - 1) < applications.totalPages ? start + 
(maxPage - 1) : applications.totalPages)})" >
	<ul class="pagination justify-content-center">
	<li class="page-application1" th:classappend="${applications.first}?'disabled'">
		<a th:onclick="'javascript:page(' + ${applications.number - 1} + ')'" aria-label='Previous' class="page-link">
			<span aria-hidden='true'>Previous</span>
		</a>
	</li>
	
	<li class="page-application1" th:each="page: ${#numbers.sequence(start, end)}" th:classappend="${applications.number eq page-1}?'active':''">
		<a th:onclick="'javascript:page(' + ${page - 1} + ')'" th:inline="text" class="page-link">[[${page}]]</a>
	</li>
	
	<li class="page-application1" th:classappend="${applications.last}?'disabled'">
		<a th:onclick="'javascript:page(' + ${applications.number + 1} + ')'" aria-label='Next' class="page-link">
				<span aria-hidden='true'>Next</span>
		</a>
	</li>
	</ul>
</div> -->

<!-- <div class="page_wrap">
    <th:block th:each="page:${#numbers.sequence(startPage,endPage)}">
        <a th:if="${page==0? page==1 : page != nowPage}" th:href="@{/program/applications(page=${page-1})}" th:text ="${page}"></a>
        <strong th:if="${page==nowPage}" th:text ="${page}" style="color:red"></strong>
    </th:block>
</div> -->

<!-- <div class="form-inline justify-content-center" th:object="${applicationSearchDto}">
	<select th:field="*{searchDateType}" class="form-control" style="width:auto;">
		<option value="all">전체기간</option>
		<option value="1d">1일</option>
		<option value="1w">1주</option>
		<option value="1m">1개월</option>
		<option value="6m">6개월</option>
	</select>
	<select th:field="*{searchProgramCategory}" class="form-control" style="width:auto;">
		<option value="">프로그램카테고리(전체)</option>
		<option value="공연">공연</option>
		<option value="전시">전시</option>
		<option value="행사">행사</option>
	</select>
	<select th:field="*{searchBy}" class="form-control" style="width:auto;">
		<option value="name">프로그램명</option>
		<option value="createdBy">등록자</option>
	</select>
	<input th:field="*{searchQuery}" type="text" class="form-control" placeholder="검색어를 입력해주세요">
	<button id="searchBtn" type="submit" class="btn btn-primary">검색</button>
</div> -->
</div>

</section>
</div>
</div>
</html>
