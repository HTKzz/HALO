<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
	<style>
		
	</style>
</th:block>

<!-- 사용자 스크립트 추가 -->
<th:block layout:fragment="script">
	<script th:inline="javascript">
		$(document).ready(function(){
			var errorMessage = [[${errorMessage}]];
			if(errorMessage != null){
				alert(errorMessage);
			}
			
			$("#cnt").on("propertychange change paste input", function() {
				var price = fnReplace($("#hdprice").val());
				var cnt = fnReplace($("#cnt").val())
				
				$("#price").val(price*cnt);
			});
			
		});
			

		function fnReplace(val) {
		    var ret = 0;
		    if(typeof val != "undefined" && val != null && val != ""){
		        ret = Number(val.replace(/,/gi,''));
		    }
		    return ret;        
		}	
	</script>
</th:block>

<head>
    <link rel="stylesheet" th:href="@{/css/reservationForm.css}">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Booking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
</head>

<div layout:fragment="content">

<body>
	<h1 class="reserve-title-h1">Reservation</h1>
	<div id="reserveContainer" style="width:1200px;">
	<form action="/reservations/add1" role="form" method="post" th:object="${application}" id="frm">
         <input type="hidden" th:value="${anum}" name="anum">
         
         
      <!-- 예매하고있는 상품 이미지 -->   
     <div class="reserveImg">
     	<input type="hidden" th:field>
     
     </div>
         
         
     <div class="reserveInfo">    
		<div class="form-group">
			<label>프로그램명</label>
			<input type="hidden" th:field="*{name}" id="name" name="name">
			<input type="text" th:field="*{name}" readOnly>
		</div>
		<div class="form-group">
			<label>날짜</label>
			 <input type="hidden" th:field="*{udate}" id="udate" name="udate">
			 <input type="text" th:field="*{udate}" readOnly>
		</div>
		<div class="form-group">
			<label th:for="cnt">인원</label>
			<input type="number" name="cnt" id="cnt" class="form-control" value="1">
		</div>
		<div class="form-group">
			<label th:for="price">가격</label>
			<input type="text" th:field="*{price}" class="form-control" readonly>
			<input type="hidden" name="price" id="hdprice" th:field="*{price}">
		</div>
		<div class="reserve-submit">
			<button type="submit" class="reserveBtn">예매하기</button>
		</div>
		
	</div>
		<input type="hidden" th:name="${_csrf.parameterName}"
			th:value="${_csrf.token}">
	</form>
</div>
</body>
</div>

</html>

